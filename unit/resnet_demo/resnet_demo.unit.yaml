# TODO: don't do this, use the file name?
# the default name of the unit
# name: example

# The ways handlers are allowed to interact with eachother 
threading_model:
  # single - by default all handlers run mutually exclusive from eachother
  # multi - by default all handlers run in parallel
  single
cpp_includes:
  - foxglove/RawImage.pb.h
  - foxglove/ImageAnnotations.pb.h
  - image_conversion.h

handlers:
  OnRGB:
    sync:
      type: all      
    inputs:
      /camera/rgb:
        type: protobuf:foxglove.RawImage
        inproc_type: image_conversion::CudaManagedImage
        qos:
          depth: 1
    outputs:
      /camera/detections/annotations:
        type: protobuf:foxglove.ImageAnnotations
      /camera/inference_buffer/r:
        type: protobuf:foxglove.RawImage
        optional: True
      /camera/inference_buffer/g:
        type: protobuf:foxglove.RawImage
        optional: True
      /camera/inference_buffer/b:
        type: protobuf:foxglove.RawImage
        optional: True