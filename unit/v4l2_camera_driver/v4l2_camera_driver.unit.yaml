# TODO: don't do this, use the file name?
# the default name of the unit
# name: example

# The ways handlers are allowed to interact with eachother 
threading_model:
  # single - by default all handlers run mutually exclusive from eachother
  # multi - by default all handlers run in parallel
  single
cpp_includes:
  - foxglove/RawImage.pb.h
#   - sensor_msgs/Image.h
#   - sensor_msgs/PointCloud2.h
#   - test.pb.h
#   - basis_example.pb.h

handlers:
  OnCameraImage:
    sync:
      type: all
      # We can't quite hit 30 fps, probably due to poor coding of this unit
      # Ideally it shouldn't matter and we occasionally drop a frame, but we need controls to not overload the callback buffer and have multiple rate subscriber callbacks in flight
      # This still also really wants type:external as it blocks
      #rate: 0.03333333333
      rate: 0.05
      
      
    outputs:
      /camera_image:
        type: protobuf:foxglove.RawImage
        optional: True
